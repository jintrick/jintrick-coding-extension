# AGENTS.md 作成のための重要事項

本ドキュメントは、LLMに実務レベルで機能するエージェント仕様を書かせるための設計原則を定義する。

抽象理念ではなく、拘束力のある構造と検証可能条件のみを採用すること。

---

## 1. 目的は「成果物定義」に落とす

- 出力ファイルパスを明示する
- 出力形式（Markdown / JSON 等）を固定する
- 必須セクションを列挙する
- 完了条件を測定可能に定義する

例（良い）:
- `docs/issue/vX.Y.Z.md` を生成する
- テンプレート必須項目をすべて埋める

抽象的な品質表現は禁止。

---

## 2. 抽象語を使用しない

以下の語は禁止：

- properly
- appropriately
- maintain
- ensure
- consider
- follow best practices

すべて検証可能な行為に変換する。

例：
- × Maintain traceability  
- ○ 各Acceptance CriteriaにRequirement IDを明記する

---

## 3. 出力構造を固定する

- 見出し構造を明示する
- 必須フィールドを列挙する
- 空欄を禁止する
- 出力フォーマットを固定する
- 可能であれば出力例を提示する

自由記述領域を最小化する。

---

## 4. 完了判定をチェックリスト化する

理念ではなく、検証可能な条件で定義する。

例：

Issueは以下を満たす場合のみ完了：

- 受け入れ基準が測定可能である
- 影響ファイルが列挙されている
- 未解決のCritical Blockerが存在しない
- テスト手順が明示されている

---

## 5. 禁止事項を明示する

- 推測で依存関係を書かない
- 新規トップレベルセクションを追加しない
- 実装を実行しない（計画のみ許可）
- 未確認情報を事実として書かない

モデルは禁止制約に従いやすい。

---

## 6. フロー制御は最小化する

以下は原則不要：

- 「順番どおり実行せよ」
- 「各ステップで停止せよ」

必要な場合はモード切替として定義する。

---

## 7. 思考役割指定より成果物拘束を優先する

以下のような人格指定は効果が弱い：

- 「Lead Architectとして考えよ」

代わりに：

- 実装手順は原子的であること
- ファイル単位で記述すること
- 具体的ツール呼び出しを列挙すること

を明示する。

---

## 8. 調査結果は構造化させる

自由形式は禁止。

例：

- Verified Files:
- Feasibility: High / Medium / Low
- Risks:
- Missing Dependencies:
- Critical Blockers:

フォーマット固定を優先する。

---

## 9. フォールバック条件を明示する

- 使用不可ツールの代替手段を定義する
- 検証信頼度（low / medium / high）を必ず記載させる

これによりハルシネーションを抑制する。

---

## 10. 「理念セクション」は原則不要

Operating Principles のような抽象原則は削除する。

必要な制約は：

- チェックリスト
- 出力フォーマット
- 禁止事項

として具体化する。

---

## 11. 1プロンプト＝1責務

責務を混在させない：

- ドラフト作成
- 技術検証
- 実装計画
- 最終統合

必要なら明確にモード分離する。

---

## 12. 粒度を明示する

曖昧な指示は禁止。

例（弱い）:
- 実装計画を作成せよ

例（強い）:
- 変更対象ファイルごとに修正内容を記述する
- 変更範囲を明示する
- テストケースを列挙する

---

## 13. 未確定情報の扱いを定義する

- 不明項目は「UNKNOWN」と明記させる
- 推測は禁止する
- 確認不足の情報を確定事項として記載しない

---

## 14. 冗長性を排除する

- 見出しと目的の重複を避ける
- 同義反復を削除する
- 説明より拘束条件を優先する

---

## 結論

有効なエージェント仕様は以下の特徴を持つ：

- 抽象語が存在しない
- 判定可能である
- 出力構造が固定されている
- 禁止事項が明確である
- フォールバックが定義されている
- 思想ではなく拘束条件で記述されている
