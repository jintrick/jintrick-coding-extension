---
id: v1.21.0
type: feat
status: in-progress
created: 2026-02-28
fixed_commit: 
---

# Issue: Refactor Markdown Linter Editor Selection (v1.21.0)

## 概要
Markdown ファイル書き込み時のプレビュー用エディタ選択ロジックを刷新する。標準的な `EDITOR` 環境変数を優先し、未設定時のデフォルト（フォールバック）を `antigravity` から `notepad` に変更する。

## 背景と問題点
現行の `md.cjs` は、非標準的な `GEMINI_EDITOR` や `VISUAL` を優先し、最終的なフォールバックとして極めて重い `antigravity` を強制している。これは Windows 環境における「確認してすぐに閉じる」というワークフローにおいて大きな障害となっている。また、`GEMINI_EDITOR` は認知されていない独自変数であり、ロジックを複雑にしている。

## 解決策
エディタ決定ロジックを、業界標準の慣習に基づいたシンプルな形式にリファクタリングする：
`const editor = process.env.EDITOR || 'notepad';`
これにより、ユーザーが `EDITOR` を設定していればそれを尊重し、そうでなければ Windows 標準の軽量な `notepad` で即座に確認できる状態にする。

## 実装内容詳細
- `hooks/scripts/linters/md.cjs` の修正：
  - `const editor = ...` の行を `const editor = process.env.EDITOR || 'notepad';` に書き換える。
  - 不要になった `GEMINI_EDITOR` および `VISUAL` の参照を削除する。

## ゴール
- Markdown プレビュー時に、環境変数 `EDITOR` があればそのエディタが起動すること。
- `EDITOR` が未設定の場合、`notepad` が起動すること。
- `antigravity` が自動的に起動しなくなること。
