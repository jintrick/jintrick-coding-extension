# v1.19.0: `idd_sync_hook` の廃止と `/done` コマンドへの移行

## 1. 概要 (Overview)
`run_shell_command` のパースに依存する脆弱な `idd_sync_hook.cjs` を **完全に廃止** し、明示的なリリースオーケストレーター `/done` コマンドによる堅牢なリリースフローに移行する。

## 2. 解決策 (Solution)
1.  **`/done` コマンドの作成**: `commands/done.toml` を作成。引数としてバージョン番号（例: `1.19.0`）を受け取り、`release-manager` スキルを起動する。
2.  **`release-manager` スキルの実装**: `skills/release-manager/SKILL.md` を作成。リリース作業（同期、ドキュメント更新、検証、コミット準備）の全手順をオーケストレートする。
3.  **同期スクリプトの独立**: `skills/release-manager/scripts/update_version.cjs` を作成。メタデータの書き換えを決定論的に実行する。
4.  **フックの削除**: `hooks/scripts/idd_sync_hook.cjs` を削除、および `hooks/hooks.json` からの定義を削除する。これにより、脆弱なシェルパースロジックをプロジェクトから一掃する。
5.  **エージェント指示の追加**: `GEMINI.md` に、リリース（作業の締めくくり）には必ず `/done <version>` を使用せよとの指示を追加する。

## 3. 実装詳細 (Details)

### 3.1 `commands/done.toml`
- 目的: リリース作業の明示的な開始
- 動作: `release-manager` スキルを起動し、バージョン `{{args}}` を渡す。

### 3.2 `skills/release-manager/SKILL.md`
- オーケストレーション手順:
    1. `scripts/update_version.cjs` を実行。
    2. `docs/issue/{{args}}.md` から `CHANGELOG.md` を更新。
    3. `npm test` による最終検証。
    4. `git add .` およびコミットメッセージ草案の提示。

## 4. ゴール (Goal / Checklist)
- [ ] `/done <version>` を実行すると `release-manager` スキルが起動し、一連のリリース作業が自動的に完遂される。
- [ ] `idd_sync_hook.cjs` が完全に削除され、`run_shell_command` のインターセプトによるオーバーヘッドと脆弱性が解消されている。
- [ ] `GEMINI.md` が更新され、新フローが定義されている。

## 5. 検証 (Verification)
- `/done` 実行により `package.json` および `gemini-extension.json` が期待通り更新されること。
- `npm test` が正常に通過すること。
