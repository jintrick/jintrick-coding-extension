# Issue: CI による自動バージョン管理とリリース管理の導入

## 概要
`main` ブランチへのデプロイ成功時に自動タグ付けを行い、リリース管理を自動化する。また、`package.json` を唯一の真実のソース (SSOT) とし、`gemini-extension.json` とのバージョン不一致を物理的に排除する。

## ディレクトリ設計
- **`tools/`**: プロジェクトの維持管理、ビルド、デプロイに使用するスクリプトを集約する。このディレクトリは開発・CI環境でのみ使用され、配布パッケージからは完全に除外される。

## 課題
- マニフェストファイル間のバージョン不一致。
- 開発用ツール（ビルドスクリプト等）が配布物に含まれる可能性。
- 手動によるタグ打ちの漏れと不正確さ。

## 解決策
1. **バージョン同期スクリプト**: `package.json` から `gemini-extension.json` へバージョンを転記する。
2. **ビルドスクリプトの集約**: ルートの `build.js` を `tools/build.cjs` に移動し、一括管理する。
3. **CI パイプライン**: `main` マージ時に同期、ビルド、クリーンアップ、タグ付けを自動実行する。

## 実装内容詳細

### 1. バージョン同期スクリプト (`tools/sync-version.cjs`)
- `package.json` の `version` を `gemini-extension.json` に同期。

### 2. ビルドスクリプトの移動 (`build.js` -> `tools/build.cjs`)
- 既存の `build.js` を `tools/` 配下に移動し、`package.json` の `scripts` を更新する。

### 3. GitHub Actions (`.github/workflows/deploy.yml`) の更新
- **初期化**: `node tools/sync-version.cjs` を実行。
- **クリーンアップ**: `tools/` ディレクトリを物理削除対象に追加。
- **タグ付け**: デプロイ成功後に `vX.Y.Z` タグを自動生成。

## ゴール
- [ ] `gemini-extension.json` が常に `package.json` と同期されている。
- [ ] 配布用 `main` ブランチから `tools/` ディレクトリが完全に除去されている。
- [ ] マージ完了後、自動的に正しいバージョンタグがプッシュされる。
