---
id: v1.4.0
status: drafting
created: 2026-02-17
fixed_commit: 
---

# Issue: サブエージェントによる客観的コードレビューの導入

## 概要
実装セッションにおける自己レビューの甘さを解消するため、独立したコンテキストを持つ `code-reviewer` サブエージェントを導入し、プロジェクト規約に基づいた客観的なレビューを実現する。

## 背景と問題点
現在の開発フローでは、実装を行ったメインエージェント自身がレビューを兼ねることが多く、実装時の意図やバイアスによって細かな不備や規約違反が見落とされる傾向がある。また、大規模な変更ではメインセッションのコンテキストが肥大化し、レビューの精度が低下する課題がある。

## 解決策
Gemini CLI のサブエージェント機能を活用し、レビュー専用の専門家をエクステンションに組み込む。
1. 独立したコンテキストループで動作させ、実装履歴の影響を排除する。
2. `REVIEW.md` 等のプロジェクト規約を自動的に参照させ、一貫性のある指摘を行わせる。
3. `gemini-extension.json` にエージェントを定義し、エクステンションの一部として配布可能にする。

## 実装内容詳細
- [ ] `agents/` ディレクトリの作成
- [ ] `agents/code-reviewer.md` の作成
    - `name: code-reviewer`
    - `tools: [read_file, grep_search]`
    - システムプロンプト: プロジェクトルートの `REVIEW.md`, `CONTRIBUTING.md`, `.gemini/REVIEW.md` を優先的に読み込み、規約に基づいたレビューを行うよう指示。
- [ ] `gemini-extension.json` への `agents` フィールドの追加
- [ ] `README.md` へのサブエージェント使用方法の追記

## ゴール
- `@code-reviewer` ツールが正常に登録され、呼び出し可能であること。
- サブエージェントが規約ファイルの内容を引用してレビューを行えること。
- 実装者とは異なる視点での改善案が提示されること。
